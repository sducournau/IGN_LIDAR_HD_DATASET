# Notes de Version - Version 1.7.2

**Date de Publication :** 4 octobre 2025  
**Type :** Version avec Nouvelles Fonctionnalit√©s

## Aper√ßu

La version 1.7.2 introduit la fonctionnalit√© **d'augmentation Proche Infrarouge (NIR)**, permettant l'analyse de la v√©g√©tation, le calcul du NDVI et des jeux de donn√©es d'apprentissage automatique multi-modaux am√©lior√©s.

## üåø Nouveaut√©s

### Augmentation Infrarouge

Ajoutez des valeurs Proche Infrarouge depuis les orthophotos IRC de l'IGN √† vos nuages de points LiDAR :

- **Int√©gration NIR** : R√©cup√©ration et int√©gration de donn√©es infrarouge depuis le service WMS G√©oplateforme de l'IGN
- **Pr√™t pour le NDVI** : Calcul d'indices de v√©g√©tation (NDVI, EVI, GNDVI, SAVI) directement depuis les dalles enrichies
- **Jeux de Donn√©es Multi-Modaux** : Combinaison G√©om√©trie + RGB + NIR pour des mod√®les ML sup√©rieurs
- **Cache Intelligent** : Syst√®me de cache efficace disque et GPU (partag√© avec l'augmentation RGB)
- **Int√©gration Transparente** : Fonctionne avec l'augmentation RGB dans le pipeline d'enrichissement

### Int√©gration CLI

```bash
# Enrichir avec infrarouge
ign-lidar-hd enrich --input dalles/ --output enrichies/ --add-infrared

# RGB + Infrarouge combin√©s (recommand√©)
ign-lidar-hd enrich --input dalles/ --output enrichies/ \
  --add-rgb --add-infrared \
  --rgb-cache-dir cache/rgb \
  --infrared-cache-dir cache/infrared

# Traitement complet
ign-lidar-hd enrich --input dalles/ --output enrichies/ \
  --mode full --auto-params --preprocess \
  --add-rgb --add-infrared \
  --use-gpu
```

### Configuration Pipeline (YAML)

```yaml
enrich:
  mode: full
  add_rgb: true
  rgb_cache_dir: "cache/rgb"

  # Nouveau : Augmentation infrarouge
  add_infrared: true
  infrared_cache_dir: "cache/infrared"
```

### API Python

```python
from ign_lidar.infrared_augmentation import IGNInfraredFetcher
import numpy as np

# Initialiser le r√©cup√©rateur
fetcher = IGNInfraredFetcher(cache_dir="cache/infrared/")

# Augmenter les points avec valeurs NIR
valeurs_nir = fetcher.augment_points_with_infrared(points)

# Calculer NDVI
ndvi = (nir - rouge) / (nir + rouge + 1e-8)
```

### Format de Sortie

- **Dimension Extra** : Valeurs NIR stock√©es comme dimension extra 'nir' (uint8, 0-255)
- **Compatibilit√© LAZ 1.4** : Format LAZ standard avec dimensions extras
- **Support CloudCompare** : Afficher les valeurs NIR comme champs scalaires

### Corrections de Bugs

- Correction de la copie de m√©tadonn√©es pour entr√©e fichier unique (probl√®me de calcul de chemin relatif)
- Am√©lioration de la gestion et conversion du format COPC
- Am√©lioration de la gestion d'erreurs pour les requ√™tes du service WMS

### Mises √† Jour de la Documentation

- Ajout du [Guide d'Augmentation Infrarouge](/docs/features/infrared-augmentation) complet
- Exemples de calcul NDVI et cas d'usage
- Guide de visualisation CloudCompare pour le champ NIR
- Mise √† jour de toutes les configurations d'exemple avec param√®tres infrarouge
- Documentation fran√ßaise et anglaise am√©lior√©e

## Changements Incompatibles

Aucun

## Installation

Mise √† jour vers la derni√®re version :

```bash
pip install --upgrade ign-lidar-hd==1.7.2
```

## Compatibilit√©

- Python 3.8+
- Toutes les APIs existantes restent compatibles

## Contributeurs

- Simon Ducournau

---

Pour la documentation compl√®te, visitez notre [site de documentation](https://sducournau.github.io/IGN_LIDAR_HD_DATASET/).
