---
sidebar_position: 0
title: v2.0.1 - Enriched LAZ Only Mode
---

# v2.0.1 - Enriched LAZ Only Mode & Bug Fixes

**Release Date:** October 2025  
**Type:** Minor Release

---

## 🎉 Overview

Version 2.0.1 adds a highly requested feature: **enriched LAZ only mode** for workflows that need feature-enriched point clouds without patch generation. This release also includes automatic corruption recovery and several stability improvements.

---

## ✨ New Features

### 🎯 Enriched LAZ Only Mode

Generate enriched LAZ files with computed features **without creating patches**. Perfect for:

- **Visualization workflows**: View enriched point clouds in CloudCompare, QGIS, etc.
- **Data exploration**: Analyze features before ML training
- **Storage optimization**: Skip patch generation when not needed
- **Intermediate processing**: Generate enriched LAZ for custom downstream workflows

#### Usage

```bash
# Generate only enriched LAZ files
ign-lidar-hd process \
  input_dir="data/raw/" \
  output_dir="output/" \
  output=enriched_only \
  features=full
```

#### Output Structure

```
output/
├── enriched/
│   ├── tile_1234_5678.laz    # With computed features
│   └── tile_1234_5679.laz
└── metadata.json              # Processing statistics
```

#### Available Output Modes

| Mode             | Enriched LAZ | Patches | Use Case                        |
| ---------------- | ------------ | ------- | ------------------------------- |
| `patches`        | ❌           | ✅      | ML training only (default)      |
| `both`           | ✅           | ✅      | Full workflow                   |
| `enriched_only`  | ✅           | ❌      | Visualization/exploration (NEW) |

#### Example: Visualization Workflow

```bash
# 1. Generate enriched LAZ files
ign-lidar-hd process \
  input_dir="raw/" \
  output_dir="enriched_output/" \
  output=enriched_only \
  features=full \
  features.use_rgb=true \
  features.compute_ndvi=true

# 2. View in CloudCompare
cloudcompare enriched_output/enriched/*.laz

# 3. Analyze in Python
from ign_lidar.io import read_laz_file

points, colors, features = read_laz_file("enriched_output/enriched/tile.laz")
print(f"Features: {features.keys()}")
# Output: Features: dict_keys(['linearity', 'planarity', 'sphericity', ...])
```

#### Benefits

- ⚡ **Faster**: Skip patch generation (50-70% time reduction)
- 💾 **Storage efficient**: No duplicate data in patches
- 🔍 **Inspectable**: View features in standard tools
- 🔄 **Flexible**: Generate patches later if needed

---

### 🔧 Automatic Corruption Recovery

Detect and handle corrupted LAZ files automatically:

#### Features

- **Automatic detection**: Identifies corrupted files during processing
- **Graceful handling**: Logs error and continues with other files
- **Detailed reporting**: Lists all corrupted files in summary
- **No crashes**: Pipeline completes even with corrupted inputs

#### Example Output

```
⚠️  Warning: Corrupted file detected: tile_1234_5678.laz
    Error: Invalid header or point data
    Skipping and continuing with next file...

Processing Summary:
✅ Processed: 23 files
❌ Skipped (corrupted): 2 files
   - tile_1234_5678.laz
   - tile_9999_0000.laz
```

#### Benefits

- ✅ **Robust processing**: Large datasets with occasional corruption
- ✅ **No manual intervention**: Automatic error handling
- ✅ **Complete logs**: Know exactly what failed and why
- ✅ **Data quality**: Identify problematic source files

---

## 🐛 Bug Fixes

### Critical Fixes

- **Fixed output mode validation**: Properly validates `output` parameter
- **Fixed enriched LAZ writing**: Ensures all features are written to LAZ files
- **Fixed metadata generation**: Correct statistics for enriched-only mode

### Stability Improvements

- **Better error messages**: More descriptive error messages for configuration issues
- **Improved logging**: Clearer progress indicators for each processing step
- **Memory optimization**: Reduced memory usage when writing enriched LAZ files

### CLI Improvements

- **Parameter validation**: Better validation of conflicting parameters
- **Help text**: Improved help text for `output` parameter
- **Default values**: Sensible defaults for all parameters

---

## 🔄 Configuration Examples

### Fast Visualization Pipeline

```bash
# Quick feature enrichment for visualization
ign-lidar-hd process \
  input_dir="raw/" \
  output_dir="viz/" \
  output=enriched_only \
  preset=fast \
  features.use_rgb=true
```

### Full Feature Analysis

```bash
# Compute all features for analysis
ign-lidar-hd process \
  input_dir="raw/" \
  output_dir="analysis/" \
  output=enriched_only \
  preset=quality \
  features=full \
  features.compute_ndvi=true \
  features.compute_intensity_stats=true
```

### Boundary-Aware Enrichment

```bash
# Enriched LAZ with boundary-aware features
ign-lidar-hd process \
  input_dir="tiles/" \
  output_dir="seamless/" \
  output=enriched_only \
  features.boundary_aware=true \
  features.boundary_buffer=10.0 \
  stitching=features
```

---

## 📊 Performance Comparison

### Processing Time

| Mode            | Enrichment | Patching | Total Time | Speedup |
| --------------- | ---------- | -------- | ---------- | ------- |
| `patches`       | ✅         | ✅       | 100%       | 1.0x    |
| `both`          | ✅         | ✅       | 110%       | 0.9x    |
| `enriched_only` | ✅         | ❌       | 45%        | 2.2x    |

### Storage Usage

| Mode            | Enriched LAZ | Patches | Total Size |
| --------------- | ------------ | ------- | ---------- |
| `patches`       | ❌           | 100 MB  | 100 MB     |
| `both`          | 80 MB        | 100 MB  | 180 MB     |
| `enriched_only` | 80 MB        | ❌      | 80 MB      |

---

## 🔧 API Changes

### Python API

```python
from ign_lidar.core import LiDARProcessor

# New output parameter
processor = LiDARProcessor(
    input_dir="raw/",
    output_dir="output/",
    output="enriched_only",  # NEW
    preset="balanced"
)

processor.run()
```

### CLI Parameter

```bash
# New output parameter values
output=patches        # Default: patches only
output=both          # Enriched LAZ + patches  
output=enriched_only # NEW: enriched LAZ only
```

---

## 📖 Use Cases

### 1. Data Exploration

```bash
# Generate enriched data for exploration
ign-lidar-hd process \
  input_dir="data/" \
  output_dir="explore/" \
  output=enriched_only \
  preset=fast

# Analyze features
python scripts/analyze_features.py explore/enriched/
```

### 2. Visualization Pipeline

```bash
# Create web visualization
ign-lidar-hd process \
  input_dir="raw/" \
  output_dir="web/" \
  output=enriched_only \
  features.use_rgb=true

# Convert to potree format
PotreeConverter web/enriched/ -o web/potree/
```

### 3. Quality Control

```bash
# Check feature quality before training
ign-lidar-hd process \
  input_dir="tiles/" \
  output_dir="qc/" \
  output=enriched_only \
  features=full

# Verify feature distributions
python scripts/validate_features.py qc/enriched/
```

### 4. Two-Stage Workflow

```bash
# Stage 1: Generate enriched LAZ
ign-lidar-hd process \
  input_dir="raw/" \
  output_dir="stage1/" \
  output=enriched_only

# Inspect and validate
cloudcompare stage1/enriched/*.laz

# Stage 2: Generate patches from enriched LAZ
ign-lidar-hd patch \
  --input-dir stage1/enriched/ \
  --output stage2/patches/
```

---

## 🔄 Upgrade Guide

### From v2.0.0

No breaking changes! Simply:

```bash
pip install --upgrade ign-lidar-hd
```

All v2.0.0 commands work identically.

### New Functionality

Add `output=enriched_only` to any existing command:

```bash
# Before (v2.0.0)
ign-lidar-hd process input_dir=data/ output_dir=out/

# After (v2.0.1) - with enriched LAZ only
ign-lidar-hd process input_dir=data/ output_dir=out/ output=enriched_only
```

---

## 📚 Documentation Updates

### New Sections

- [Enriched LAZ Only Mode](/features/enriched-laz-only)
- [Output Options](/guides/output-options)
- [Visualization Workflows](/tutorials/visualization)

### Updated Sections

- [Quick Start](/guides/quick-start) - Added enriched-only examples
- [Complete Workflow](/guides/complete-workflow) - Added all output modes
- [Configuration Reference](/reference/config-examples) - Added output examples

---

## 🐛 Known Issues

### None

No known issues in this release.

---

## 🙏 Acknowledgments

- Feature request by multiple users on GitHub Discussions
- Testing and feedback from the community

---

## 📞 Support

- **Documentation:** https://ign-lidar-hd.readthedocs.io
- **Issues:** https://github.com/sducournau/IGN_LIDAR_HD_DATASET/issues
- **Discussions:** https://github.com/sducournau/IGN_LIDAR_HD_DATASET/discussions

---

## ⏭️ What's Next?

### Coming in v2.1

- **Streaming mode**: Process files as they arrive
- **Cloud integration**: S3/Azure Blob storage support
- **Distributed processing**: Multi-machine workflows

See the [Roadmap](https://github.com/sducournau/IGN_LIDAR_HD_DATASET#roadmap) for more details.

---

**Enjoy the new enriched LAZ only mode!** 🎉
