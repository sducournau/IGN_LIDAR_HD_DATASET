# @package _global_
#
# Ground Truth Training - LOD3 with Classification Update
#
# This experiment generates high-quality training data by:
# 1. Updating tile classification using IGN BD TOPOÂ® ground truth
# 2. Applying NDVI refinement for building/vegetation separation
# 3. Generating labeled patches for training

defaults:
  - override /processor: default
  - override /features: full
  - override /preprocess: default
  - override /ground_truth: update_classification
  - override /output: default

# Processor configuration
processor:
  lod_level: LOD3
  architecture: pointnet++
  use_gpu: false
  num_workers: 4
  patch_size: 50.0 # Smaller patches for better ground truth coverage
  patch_overlap: 0.1
  num_points: 8192
  augment: false

# Features
features:
  mode: full
  use_rgb: true
  use_infrared: true
  compute_ndvi: true # NDVI computed from RGB+NIR for refinement
  include_extra: true
  k_neighbors: 16

# Ground truth (overrides disabled default)
ground_truth:
  enabled: true
  update_classification: true
  include_buildings: true
  include_roads: true
  include_water: true
  include_vegetation: true
  use_ndvi: true
  fetch_rgb_nir: true # Fetch from IGN orthophotos
  ndvi_vegetation_threshold: 0.3
  ndvi_building_threshold: 0.15
  cache_dir: data/cache/ground_truth
  save_ground_truth_vectors: true
  save_updated_tiles: true

# Preprocessing
preprocess:
  enabled: true
  statistical_outlier_removal: true
  voxel_downsample: false

# Output
output:
  format: npz
  processing_mode: both # Save both enriched tiles and patches
  save_stats: true
  save_metadata: true

# Global settings
verbose: true
log_level: INFO
