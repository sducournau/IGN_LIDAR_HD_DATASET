# ============================================================================
# IGN LiDAR HD - Basic CPU Configuration
# ============================================================================
# Standard CPU processing with LOD2 features.
# Perfect for: Users without GPU, medium datasets (5-20 tiles)
#
# What this does:
# - LOD2 classification (12 features, 15 building classes)
# - CPU-optimized processing
# - Multi-scale artifact suppression (2 scales for speed)
# - No external data sources (works offline)
#
# Expected performance: ~8-12 min per 18M point tile (CPU, 8 cores)
# ============================================================================

# Input/Output paths (REQUIRED - modify these)
input_dir: "/path/to/your/laz/tiles"
output_dir: "/path/to/output"

# ============================================================================
# PROCESSOR SETTINGS
# ============================================================================
processor:
  # Processing level
  lod_level: "LOD2" # Simplified building classification

  # What to generate
  processing_mode: "patches_only" # Only create training patches

  # Hardware
  use_gpu: false # CPU processing
  num_workers: 4 # Parallel workers (adjust for your CPU)

  # Patch settings
  patch_size: 50.0 # 50m Ã— 50m patches
  num_points: 16384 # 16k points per patch
  overlap: 0.1 # 10% overlap for better boundaries

# ============================================================================
# PREPROCESSING
# ============================================================================
preprocess:
  enabled: true # Enable outlier removal
  sor_k: 12
  sor_std: 2.0
  ror_radius: 1.0
  ror_neighbors: 4
  voxel_enabled: false

# ============================================================================
# FEATURES (LOD2 WITH MULTI-SCALE)
# ============================================================================
features:
  # Feature mode
  mode: "lod2" # ~12 features for building classification

  # Geometric computation
  k_neighbors: 30
  search_radius: 3.0

  # Core features
  compute_normals: true
  compute_curvature: true
  compute_height: true
  compute_geometric: true # planarity, sphericity, verticality
  compute_density: true

  # Multi-scale artifact suppression (2 scales for speed)
  multi_scale_computation: true
  scales:
    - name: fine
      k_neighbors: 30
      search_radius: 2.0
      weight: 0.6 # Emphasize fine details

    - name: coarse
      k_neighbors: 80
      search_radius: 4.0
      weight: 0.4 # Some context from coarse scale

  # Aggregation settings
  aggregation_method: "variance_weighted" # Adaptive aggregation
  variance_penalty_factor: 2.0
  artifact_variance_threshold: 0.15

  # Disable advanced features
  compute_cluster_id: false
  spectral_features: false

# ============================================================================
# DATA SOURCES (ALL DISABLED FOR OFFLINE PROCESSING)
# ============================================================================
data_sources:
  bd_topo:
    enabled: false

  dtm:
    enabled: false

  orthophoto:
    enabled: false
# ============================================================================
# USAGE
# ============================================================================
# ign-lidar-hd process -c examples/quickstart/01_cpu_basic.yaml
#
# Or override paths:
# ign-lidar-hd process -c examples/quickstart/01_cpu_basic.yaml \
#   input_dir="/data/tiles" \
#   output_dir="/data/output"
#
# Adjust for your CPU:
# ign-lidar-hd process -c examples/quickstart/01_cpu_basic.yaml \
#   processor.num_workers=8 \
#   input_dir="/data/tiles"
# ============================================================================
