# ============================================================================
# IGN LiDAR HD v3.2+ - Basic CPU Configuration
# ============================================================================
# Standard CPU processing with LOD2 features.
# Perfect for: Users without GPU, medium datasets (5-20 tiles)
#
# What this does:
# - LOD2 classification (12 features, 15 building classes)
# - CPU-optimized processing
# - Multi-scale artifact suppression (2 scales for speed)
# - No external data sources (works offline)
#
# Expected performance: ~8-12 min per 18M point tile (CPU, 8 cores)
# ============================================================================

# ============================================================================
# REQUIRED PARAMETERS
# ============================================================================
input_dir: "/path/to/your/laz/tiles" # ⚠️ REQUIRED - modify this
output_dir: "/path/to/output" # ⚠️ REQUIRED - modify this

# ============================================================================
# ESSENTIAL SETTINGS
# ============================================================================

# Classification mode
mode: "lod2" # LOD2 building classification

# Processing mode
processing_mode: "patches_only" # Only create ML training patches

# Hardware (CPU)
use_gpu: false # CPU processing
num_workers: 4 # Parallel workers (adjust for your CPU cores)

# Patch settings
patch_size: 50.0 # 50m × 50m patches
num_points: 16384 # 16k points per patch
patch_overlap: 0.1 # 10% overlap for better boundaries

# ============================================================================
# FEATURE CONFIGURATION (LOD2 + MULTI-SCALE)
# ============================================================================
features:
  feature_set: "standard" # ~12 LOD2 features
  k_neighbors: 30
  search_radius: null # Auto-calculate

  # Spectral features disabled (offline processing)
  use_rgb: false
  use_nir: false
  compute_ndvi: false

  # Multi-scale artifact suppression (2 scales for speed)
  multi_scale: true
  scales:
    - fine # k_neighbors: 30, search_radius: 2.0m
    - coarse # k_neighbors: 80, search_radius: 4.0m

# ============================================================================
# OPTIMIZATIONS
# ============================================================================
enable_optimizations: true
enable_async_io: true # +12-14% performance
enable_batch_processing: false # Limited benefit with CPU multi-worker
enable_gpu_pooling: false # N/A for CPU

# ============================================================================
# ADVANCED SETTINGS (OPTIONAL)
# ============================================================================
advanced:
  # Preprocessing (outlier removal)
  preprocessing:
    enabled: true
    sor_k: 12 # Statistical Outlier Removal
    sor_std: 2.0
    ror_radius: 1.0 # Radius Outlier Removal
    ror_neighbors: 4
    voxel_enabled: false

  # Multi-scale advanced settings
  multi_scale_advanced:
    aggregation_method: "variance_weighted" # Adaptive aggregation
    variance_penalty_factor: 2.0
    artifact_variance_threshold: 0.15
    reuse_kdtrees_across_scales: true
    parallel_scale_computation: false # CPU: use workers instead

# ============================================================================
# USAGE
# ============================================================================
# Basic:
#   ign-lidar-hd process -c examples/quickstart/01_cpu_basic.yaml \
#     input_dir="/data/tiles" \
#     output_dir="/data/output"
#
# Adjust CPU cores:
#   ign-lidar-hd process -c examples/quickstart/01_cpu_basic.yaml \
#     input_dir="/data/tiles" \
#     output_dir="/data/output" \
#     num_workers=8
# ============================================================================
